<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <title>CardsUP - Scrummaster</title>

  <!-- font-family: 'Lilita One', cursive; -->
  <link href='https://fonts.googleapis.com/css2?family=Lilita+One&display=swap' rel='stylesheet'>

  <!-- font-family: 'Open Sans', sans-serif; -->
  <link href='https://fonts.googleapis.com/css2?family=Open+Sans&display=swap' rel='stylesheet'>

  <link rel='stylesheet' type='text/css' href='style/dark-theme.css'>
  <link rel='stylesheet' type='text/css' href='style/global.css'>

  <style rel='stylesheet' type='text/css'>
  </style>
</head>
<body>
<div id='body-wrapper'>
  <div id='header'>

  </div>
  <div id='estimates'>

  </div>
  <div id='footer'>

  </div>
</div>
</body>
<!-- TODO: Load Locally -->
<script src='lib/uuidv4-8.2.0.min.js'></script>
<script src='script/socket.js'></script>
<script src='script/messages.js'></script>
<script src='script/users.js'></script>
<script src='script/session.js'></script>

<script>
  console.info('Loading [scrum-master]...')
  const sessionData = JSON.parse(sessionStorage.getItem('sessionData'))
  // TODO if sessionData not set, load from URL w/ params

  session.sessionName = sessionData.sessionName
  console.debug('  sessionName=', session.sessionName)

  socket.onopen = function (event) {
    console.info('Creating Session')
    const msg = {
      action: 'createSession',
      messageId: uuidv4(),
      sessionName: session.sessionName,
    }
    console.debug('  -->', msg)
    socket.send(JSON.stringify(msg))
  }

  socket.onmessage = function (event) {
    let msg = JSON.parse(event.data)
    scrumMasterMessageHandler(msg)
  }

  console.info('Loaded [scrum-master]')
</script>

</html>
