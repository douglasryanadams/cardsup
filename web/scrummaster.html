<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CardsUP - Scrummaster</title>

  <!-- font-family: 'Lilita One', cursive; -->
  <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">

  <!-- font-family: 'Open Sans', sans-serif; -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="style/dark-theme.css">
  <link rel="stylesheet" type="text/css" href="style/global.css">

  <style rel="stylesheet" type="text/css">
  </style>
</head>
<body>
<div id="body-wrapper">
  <div id="header">

  </div>
  <div id="estimates">

  </div>
  <div id="footer">

  </div>
</div>
</body>
<!-- TODO: Load Locally -->
<script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>
<script src="script/socket.js"></script>

<script>
  console.info("Loading [scrummaster]...")
  const sessionData = JSON.parse(sessionStorage.getItem('sessionData'))
  // TODO if sessionData not set, load from URL w/ params

  const sessionName = sessionData.sessionName
  console.debug('sessionName=', sessionName)

  socket.onopen = function (event) {
    console.info("Createing Session")
    const msg = {
      action: 'createSession',
      messageId: uuidv4(),
      sessionName: sessionName,
    }
    console.debug("  -->", msg)
    socket.send(JSON.stringify(msg))
  }

  socket.onmessage = function (event) {
    let msg = JSON.parse(event.data)
    console.warn("TODO: Unimplemented 'onmessage'")
    console.debug(" <-- msg=", msg)
  }

  console.info("Loaded [scrummaster]")
</script>

</html>
